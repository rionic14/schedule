<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>월간 스케줄</title>
    <style>
      @font-face {
        font-family: "Eagles-Bold";
        src: url("Fonts/HanwhaEagles-Regular.ttf") format("truetype");
      }
      @font-face {
        font-family: "JP";
        src: url("PretendardJPVariable.ttf") format("truetype-variations");
        font-weight: 100 900;
        font-style: normal;
      }

      body {
        font-family: "JP", sans-serif;
        margin: 10px;
        background-color: white;
      }

      /* --- 상단 네비게이션 및 로고 레이아웃 추가 --- */
      .top-container {
        text-align: center;
        margin-bottom: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .title-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 30px; /* 로고와 타이틀 사이 간격 */
        margin-bottom: 15px;
      }

      .logo-img {
        height: 70px; /* 로고 높이 */
        width: auto;
        object-fit: contain;
      }

      .main-title {
        display: inline-block;
        font-family: "Eagles-Bold";
        font-size: 3rem;
        color: rgb(28, 30, 60);
        text-decoration: none;
      }

      .btn-container {
        display: flex;
        justify-content: center;
        gap: 20px;
      }
      /* ------------------------------------------ */

      .nav-btn {
        padding: 10px 20px;
        font-family: "Eagles-Bold";
        font-size: 1.5rem;
        text-decoration: none;
        border-radius: 5px;
        color: white;
      }
      .btn-futures { background-color: rgb(252, 78, 0); }
      .btn-dev { background-color: rgb(28, 30, 60); }

      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
      }

      th, td {
        border: 1px solid #ccc;
        height: 125px;
        vertical-align: middle;
        padding: 5px;
        overflow: hidden;
      }

      .date-header-row th {
        height: 35px;
        background-color: #f8f9fa;
        font-size: 2rem;
        text-align: center;
        vertical-align: middle;
      }

      .week-separator td, .week-separator th {
        border-bottom: 3px solid rgb(28, 30, 60) !important;
      }

      .team-label {
        width: 35px !important;
        padding: 0 !important;
        vertical-align: middle;
        text-align: center;
      }

      .label-f {
        background-color: rgb(230, 230, 230) !important;
        font-size: 3rem;
        color: rgb(252, 78, 0) !important;
        font-family: "Eagles-Bold";
      }

      .label-d {
        background-color: rgb(230, 230, 230);
        font-size: 3rem;
        color: rgb(28, 30, 60);
        font-family: "Eagles-Bold";
      }

      td { padding: 0 !important; height: 110px; }

      .event-container {
        width: 100%; height: 100%;
        display: flex; flex-direction: column;
        align-items: center; justify-content: center;
        cursor: pointer;
        padding: 0 10px; 
        box-sizing: border-box;
        overflow: hidden; 
      }

      .truncate {
        white-space: nowrap !important; 
        overflow: hidden;
        text-overflow: clip; 
        display: block;
        width: 100%;
        text-align: center;
      }

      .event-title { font-weight: 700; font-size: 2.3rem; line-height: 1; }
      .event-info { font-weight: 500; font-size: 1.7rem; color: #333; line-height: 1; margin-top: 5px; }
      .has-more { font-weight: 800; font-size: 1.2rem; color: rgb(139, 139, 139); margin-top: 2px; }

      #modal-overlay {
        display: none; position: fixed; top: 0; left: 0;
        width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7);
        z-index: 1000; justify-content: center; align-items: center;
      }
      #modal-content {
        width: 70%; height: 90%; background: white; border-radius: 15px;
        padding: 40px; overflow-y: auto; box-sizing: border-box;
      }
      .modal-item { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid #000; }
      .modal-item:last-child { border-bottom: none; }
      .m-title { font-size: 4rem; font-weight: 800; text-align: center; margin-bottom: 10px; }
      .m-info { font-size: 3.4rem; font-weight: 500; text-align: center; color: #444; }
      .m-divider { border-top: 3.4px dashed #ccc; margin: 20px 0; }
      .m-desc { font-size: 2.5rem; text-align: left; line-height: 1.6; white-space: pre-wrap; }

      .orange { color: rgb(252, 78, 0) !important; }
      .navy { color: rgb(28, 30, 60) !important; }
      .green { color: rgb(140, 210, 70) !important; }
      .blue { color: rgb(0, 190, 210) !important; }
      .red { color: rgb(194, 0, 0) !important; }

      #loading { text-align: center; font-family: "Eagles-Bold"; padding: 20px; }

      /* [인쇄 설정] 프린트 시 한 장에 맞춤 */
      @media print {
        @page {
          size: auto;
          margin: 5mm; /* 인쇄 여백 최소화 */
        }
        body {
          margin: 0;
          padding: 0;
          zoom: 0.6; /* 6주 분량이 한 장에 들어오도록 전체 축소 (필요시 조절) */
        }
        .btn-container, #loading {
          display: none !important; /* 인쇄 시 버튼과 로딩 문구 제외 */
        }
        table {
          page-break-inside: avoid;
        }
      }

      /* [글귀 스타일] 아래에 추가 */
      .bottom-quote {
        text-align: center;
        margin-top: 30px;
        margin-bottom: 30px;
        font-family: "Eagles-Bold";
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="top-container">
      <div class="title-wrapper">
        <img src="images/emblem.png" alt="Futures Logo" class="logo-img">
        <a href="index.html" class="main-title">퓨처스/육성군 스케줄 (~6주)</a>
        <img src="images/italic.png" alt="Development Logo" class="logo-img">
      </div>
      <div class="btn-container">
        <a href="futures.html" class="nav-btn btn-futures">퓨처스 일일스케줄 보기</a>
        <a href="development.html" class="nav-btn btn-dev">육성군 일일스케줄 보기</a>
      </div>
    </div>

    <table id="schedule-table">
      <tbody id="schedule-body"></tbody>
    </table>

    <div class="bottom-quote">
      <span style="font-size: 1.5rem;"></span>
    </div>

    <div id="loading">데이터 로딩 중...</div>

    <div id="modal-overlay">
      <div id="modal-content"></div>
    </div>

    <script>
      const API_KEY = "AIzaSyAluwiwfHMYHBoAZe5EAXAiejet-s_Pwl8";
      const CALS = {
        F: "0e62092f3ac04d780ab1cccccb428e2119f2823be6f59112cc0e427d843a0695@group.calendar.google.com",
        D: "ca9502e51d0b0bd07eaa8ab7dbbc3925b69576439b0642b072dc79015eed8d11@group.calendar.google.com",
      };

      function getTextColorClass(text) {
        if (text.includes("-한화")) return "orange";
        if (text.includes("한화-")) return "navy";
        if (text.includes("미정")) return "green";
        if (text.includes("이동")) return "blue";
        if (text.includes("휴")) return "red";
        return "";
      }

      function openModal(events) {
        const modalContent = document.getElementById('modal-content');
        modalContent.innerHTML = events.map(e => {
          const startTime = e.start.dateTime 
            ? new Date(e.start.dateTime).getHours() + ":" + String(new Date(e.start.dateTime).getMinutes()).padStart(2, "0") 
            : "";
          return `
            <div class="modal-item">
              <div class="m-title ${getTextColorClass(e.summary)}">${e.summary}</div>
              <div class="m-info">${e.location || ""} ${startTime ? `[${startTime}]` : ""}</div>
              <div class="m-divider"></div>
              <div class="m-desc">${e.description || "상세 내용이 없습니다."}</div>
            </div>`;
        }).join('');
        document.getElementById('modal-overlay').style.display = 'flex';
      }

      document.getElementById('modal-overlay').addEventListener('click', function(e) {
        if (e.target === this) this.style.display = 'none';
      });

      async function fetchEvents(calId, start, end) {
        const url = `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calId)}/events?key=${API_KEY}&timeMin=${start.toISOString()}&timeMax=${end.toISOString()}&singleEvents=true&orderBy=startTime`;
        try {
          const response = await fetch(url);
          const data = await response.json();
          return data.items || [];
        } catch (e) { return []; }
      }

      async function render() {
        const now = new Date();
        const firstSunday = new Date(now.setDate(now.getDate() - now.getDay()));
        firstSunday.setHours(0, 0, 0, 0);
        const lastDay = new Date(firstSunday);
        lastDay.setDate(firstSunday.getDate() + 42); 

        const [fEvents, dEvents] = await Promise.all([
          fetchEvents(CALS.F, firstSunday, lastDay),
          fetchEvents(CALS.D, firstSunday, lastDay),
        ]);

        const tbody = document.getElementById("schedule-body");
        const weekDays = ["日", "月", "火", "水", "木", "金", "土"];

        for (let w = 0; w < 6; w++) {
          const weekStart = new Date(firstSunday);
          weekStart.setDate(firstSunday.getDate() + (w * 7));

          const headerRow = document.createElement("tr");
          headerRow.className = "date-header-row";
          let headerHtml = `<th style="width: 35px; border: none; background: none"></th>`;
          for (let i = 0; i < 7; i++) {
            const d = new Date(weekStart);
            d.setDate(weekStart.getDate() + i);
            const color = d.getDay() === 0 ? "red" : (d.getDay() === 6 ? "blue" : "black");
            headerHtml += `<th style="color: ${color}">${d.getMonth() + 1}/${d.getDate()} ${weekDays[d.getDay()]}</th>`;
          }
          headerRow.innerHTML = headerHtml;
          tbody.appendChild(headerRow);

          const rowF = document.createElement("tr");
          rowF.innerHTML = `<td class="team-label label-f">F</td>` + `<td></td>`.repeat(7);
          tbody.appendChild(rowF);

          const rowD = document.createElement("tr");
          rowD.className = "week-separator"; 
          rowD.innerHTML = `<td class="team-label label-d">D</td>` + `<td></td>`.repeat(7);
          tbody.appendChild(rowD);

          const fillCells = (row, events) => {
            const cells = row.querySelectorAll("td:not(.team-label)");
            cells.forEach((cell, idx) => {
              const currentTargetDate = new Date(weekStart);
              currentTargetDate.setDate(weekStart.getDate() + idx);
              const dayEvents = events.filter((e) => {
                const eDate = new Date(e.start.date || e.start.dateTime);
                return eDate.toDateString() === currentTargetDate.toDateString();
              });
              if (dayEvents.length > 0) {
                const e = dayEvents[0];
                const startTime = e.start.dateTime ? new Date(e.start.dateTime).getHours() + ":" + String(new Date(e.start.dateTime).getMinutes()).padStart(2, "0") : "";
                cell.innerHTML = `
                  <div class="event-container">
                    <span class="event-title truncate ${getTextColorClass(e.summary)}">${e.summary}</span>
                    <span class="event-info truncate">${e.location || ""} ${startTime ? `[${startTime}]` : ""}</span>
                    ${dayEvents.length > 1 ? `<span class="has-more">+ 더보기</span>` : ""}
                  </div>`;
                cell.querySelector('.event-container').onclick = () => openModal(dayEvents);
              }
            });
          };
          fillCells(rowF, fEvents);
          fillCells(rowD, dEvents);
        }
        document.getElementById("loading").style.display = "none";
      }
      render();
    </script>

<div class="bottom-quote">
  Presented by OOTA RION | 大田理温 2026
   <span class="kimatta-orion-no-tsuma"></span>
   <span class="in-tomiokakei-no-kokoro">kei-wo-kangaete. oreno-no-tonikaiterumamaninarukara</span>
   <span class="big-text">HANWHA EAGLES 2026</span>
</div>


<style>
  .bottom-quote { /*전체적인 글이 놓이는 위치*/
    text-align: center;
    margin: 10px 0;
    font-family: "JP", sans-serif;
    font-size: .8rem; /* 기본 크기 */
    color: #555;
  }

  .in-tomiokakei-no-kokoro {
    font-size: .01rem;   /* 특정 부분만 크게 */
    font-family: "JP", sans-serif; /* 서체 변경도 가능 */
    color: rgb(10, 80, 140); /* 색상 강조 */
    vertical-align: middle;
  }

    .kimatta-orion-no-tsuma {
    font-size: 2.5rem;   /* 특정 부분만 크게 */
    font-family: "JP", sans-serif;/* 서체 변경도 가능 */
    color: rgb(100, 40, 230); /* 색상 강조 */
    vertical-align: middle;
  }

    .big-text {
    font-size: 2.5rem;   /* 특정 부분만 크게 */
    font-family: "Eagles-Bold"; /* 서체 변경도 가능 */
    color: rgb(252, 78, 0); /* 색상 강조 */
    vertical-align: middle;
  }
</style>

  </body>
</html>